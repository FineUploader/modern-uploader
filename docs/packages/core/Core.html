<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Core</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Core</h1>

    




<section>

<header>
    
        <h2>Core</h2>
        
            <div class="class-description">Main class for core plug-in.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="Core"><span class="type-signature"></span>new Core<span class="signature">(plugins)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Loads an array of plug-ins.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>plugins</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last">Plugin object instances.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.0.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="core.js.html">core.js</a>, <a href="core.js.html#line207">line 207</a>
    </li></ul></dd>
    

    

    

    
</dl>





<h5>Fires:</h5>
<ul>
    <li><a href="global.html#event:allPluginsLoaded">event:allPluginsLoaded</a></li>

    <li><a href="global.html#event:added">event:added</a></li>

    <li><a href="global.html#event:removed">event:removed</a></li>

    <li><a href="global.html#event:resetComplete">event:resetComplete</a></li>

    <li><a href="global.html#event:updated">event:updated</a></li>
</ul>



<h5>Listens to Events:</h5>
<ul>
    <li><a href="global.html#event:add">event:add</a></li>

    <li><a href="global.html#event:remove">event:remove</a></li>

    <li><a href="global.html#event:reset">event:reset</a></li>

    <li><a href="global.html#event:update">event:update</a></li>
</ul>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>import Core from 'core'

const modernUploader = new Core([
   new SomePlugin1(),
   new SomePlugin2()
])</code></pre>



    
    </div>

    
        <h3 class="subsection-title">Extends</h3>

        


    <ul>
        <li><a href="Plugin.html">Plugin</a></li>
    </ul>


    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="name"><span class="type-signature">(readonly) </span>name<span class="type-signature"> :string</span></h4>




<div class="description">
    A name for this plug-in.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.0.0</li></ul></dd>
    

    
    <dt class="inherited-from">Inherited From:</dt>
    <dd class="inherited-from"><ul class="dummy"><li>
        <a href="Plugin.html#name">Plugin#name</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="plugin.js.html">plugin.js</a>, <a href="plugin.js.html#line75">line 75</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="fire"><span class="type-signature"></span>fire<span class="signature">(event)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Trigger an event to be passed to all other registered event listeners. This event will be
bubbled, starting with the first registered listener, and ending with the last.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>event</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Event.html">Event</a></span>


            
            </td>

            

            

            <td class="description last">event to pass to all registered listeners for this event type.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.0.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="core.js.html">core.js</a>, <a href="core.js.html#line328">line 328</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Once the event has been bubbled to all registered listeners,
the result will be returned by resolving or rejecting this returned Promise, depending on the outcome.
If the event is cancelled by a listener, this Promise will be rejected with any data provided
by the cancelling listener. If this event is not cancelled, any data provided by all listeners
will be included when resolving the returned Promise.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// A plug-in that wants to add a new item (File/Blob/etc),
// will fire an "add" event, which will be handled by the
// core plug-in, resulting in the addition of the item
// to the internal cache maintained by the core plug-in.
// But some other plug-in could also prevent this add
// from happening before it reaches the core plug-in
// (perhaps a validator plug-in, for example).
core.fire(
   new Event({
      type: 'add',
      payload: {
         item: someFile
      }
   })
)
.then(
   function added(event) {
      // the item was added
   },

   function notAdded(event) {
      // something prevented item from being added
   }
)</code></pre>



        
            

    

    <h4 class="name" id="get"><span class="type-signature"></span>get<span class="signature">(entryQuery, clone<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Object|Array|null}</span></h4>

    



<div class="description">
    This looks up items in the store. It also provides an opportunity to
retrieve all items maintained by the system. Currently, items may be
looked up by ID, or you may retrieve all items from the store. By
default, the returned items will be deeply cloned, but this can be
switched off to save processor cycles for large data sets.
Any records that you would like to modify must be sent back
to the system in an updateData event.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>entryQuery</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>
|

<span class="param-type">undefined</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Retrieve the associated
records from the store. An object describes the specific entries to return.
If this is undefined, all records will be returned.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">number</span>
|

<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last">The ID or IDs of the entries
to retrieve.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>clone</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.0.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="core.js.html">core.js</a>, <a href="core.js.html#line264">line 264</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    One or more matching records, or null if no matches were found.
If only one record was requested, the an Array will not be returned - only the
entry object or null if the entry cannot be located. If multiple records are
requested, an array will always be returned with any matching entries.
If no entries match, the array will be empty.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>
|

<span class="param-type">Array</span>
|

<span class="param-type">null</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// get one record
const record = api.get({id: 'uuid-000'})
expect(record).toEqual(uuid000Record)

// get multiple records
const record = api.get({id: ['uuid-000', 'uuid-001']})
expect(record).toEqual([uuid000Record, uuid001Record])

// get all records
const record = api.get()
expect(record).toEqual([uuid000Record, uuid001Record, uuid002Record, ...])</code></pre>



        
            

    

    <h4 class="name" id="load"><span class="type-signature">(abstract) </span>load<span class="signature">(api)</span><span class="type-signature"> &rarr; {Promise|undefined}</span></h4>

    



<div class="description">
    Called to load this specific plug-in. All setup logic, async or sync,
should be completed as part of handling this call. For example, register
event handlers here.
Do NOT mutate the passed API object directly. Only return a new object
that adds new methods or augments existing ones.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>api</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Core.html">Core</a></span>


            
            </td>

            

            

            <td class="description last">API for core plug-in.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.0.0</li></ul></dd>
    

    
    <dt class="inherited-from">Inherited From:</dt>
    <dd class="inherited-from"><ul class="dummy"><li>
        <a href="Plugin.html#load">Plugin#load</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="plugin.js.html">plugin.js</a>, <a href="plugin.js.html#line64">line 64</a>
    </li></ul></dd>
    

    

    

    
</dl>











<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        If there is an immediate issue loading the plug-in.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    If a Promise is returned, resolve or reject once the outcome is known.
Otherwise, return nothing for success or throw for failure. To override existing
API methods, or provide new API methods, simply return an object (or pass one
through your call to resolve the returned Promise). Any new or overridden methods
will be available to all other plug-ins.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>
|

<span class="param-type">undefined</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// simple load implementation
load(api) {
   api.on('add', event => {
      // handle "add" event
   })
}

// adding a new API method
load(api) {
   return {
      sayHi: () => 'hi'
   }
}

// overriding an existing API method
load(api) {
   // Always do this to ensure the original
   // method that you are overriding maintains
   // access to its expected context. Only
   // needed if you intend to call the original
   // method in the new method.
   const oldSayHi = api.add.bind(api)

   return {
      sayHi: () => {
         return oldSayHi() + ' you!'
      }
   }
}</code></pre>



        
            

    

    <h4 class="name" id="on"><span class="type-signature"></span>on<span class="signature">(typeOrListenersObject, listener)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Register one or more handlers for one or more specific events.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>typeOrListenersObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Register one listener by specifying the event type as a string here,
followed by the listener function as the next parameter, or pass a single object parameter
with event type properties and listener function values to conveniently register for multiple events.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>listener</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#eventCallback">eventCallback</a></span>


            
            </td>

            

            

            <td class="description last">Listener Function to be called when the passed event type is fired.
This parameter is ignored if the first parameter is a listener object. In that case, it must be
supplied as the value for each event type property in the passed object.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.0.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="core.js.html">core.js</a>, <a href="core.js.html#line364">line 364</a>
    </li></ul></dd>
    

    

    

    
</dl>















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// register a single listener for an "add" event
core.on('add', event => {
   // handle "add" event
})

// register a listener for the "add" event,
// and another for the "remove" event
core.on({
   add: event => {
      // handle "add" event
   },
   remove: event => {
      // handle "remove" event
   }
})</code></pre>



        
            

    

    <h4 class="name" id="onAll"><span class="type-signature"></span>onAll<span class="signature">(listener)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Register a listener for all events. This may be useful for plug-ins that need to be notified
whenever any event is triggered in the system. A good example would be a plug-in that logs all
activity.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>listener</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#eventCallback">eventCallback</a></span>


            
            </td>

            

            

            <td class="description last">Listener function</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.0.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="core.js.html">core.js</a>, <a href="core.js.html#line405">line 405</a>
    </li></ul></dd>
    

    

    

    
</dl>















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// register for all system events
core.onAll(event => {
   console.log(`I just received an event of type ${event.type}.`)
   // do something else with this event:
   //   - return a new value for the originator
   //   - cancel the event
   //   - passively listen or react in some other way
})</code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Core.html">Core</a></li><li><a href="Event.html">Event</a></li><li><a href="Plugin.html">Plugin</a></li><li><a href="Uuid.html">Uuid</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:add">add</a></li><li><a href="global.html#event:added">added</a></li><li><a href="global.html#event:allPluginsLoaded">allPluginsLoaded</a></li><li><a href="global.html#event:remove">remove</a></li><li><a href="global.html#event:removed">removed</a></li><li><a href="global.html#event:reset">reset</a></li><li><a href="global.html#event:resetComplete">resetComplete</a></li><li><a href="global.html#event:update">update</a></li><li><a href="global.html#event:updated">updated</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Fri May 13 2016 04:33:19 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>